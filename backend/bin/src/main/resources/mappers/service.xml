<?xml version="1.0" encoding="UTF-8"?>
<mapper namespace="com.web.curation.dao.ServiceDAO">

	<!-- 개인이 등록한 서비스 조회 -->
	<select id="selectServiceByUserno" resultType="ConnectorService">
		select servno,
			   userno,
			   cateno,
			   servname,
			   price,
			   description,
			   seraddr
			   
		  from service
		  where userno = #{userno}
		  order by servno desc
	</select>
	
	<!-- 지역별 서비스 조회 -->
	<select id="selectServiceByDongcode" resultType="ConnectorService">
		select servno,
			   userno,
			   cateno,
			   servname,
			   price,
			   description,
			   seraddr
		 from service
		 <if test= 'seraddr != null and 'word' != null'>
		 where seraddr = #{seraddr} and servname Like '%#{word}%' 
		 </if>
		 order by servno desc
	</select>

	<!-- 게시글 등록 -->
	<insert id="insertQna" parameterType="Qna">
		insert into qna (
			qtitle,qcontent,userno
		) values (#{qtitle}, #{qcontent},#{userno})
	</insert>
	
	<!-- 게시글 수정 -->
	<update id="updateQna" parameterType="Qna">
		update qna
		   set
		   		qtitle = #{qtitle}, 
		   	   qcontent = #{qcontent} 
		 where qnano = #{qnano};
	</update>

	<!-- 게시글 삭제 -->
	<delete id="deleteQna" parameterType="int">
		delete 
		  from qna  
		 where qnano = #{qnano}
	</delete>

</mapper>